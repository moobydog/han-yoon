# 스패너 프로젝트 상세 설계 문서

## 프로젝트 개요
**부부가 함께 쓰는 간편한 웹 가계부 서비스**
- 10초 안에 지출 입력 가능한 초간편 UI
- 실시간 동기화로 부부가 동시에 사용
- 복잡한 회원가입 없이 가족코드로 간편 접속

## 폴더 구조
\`\`\`
spanner/
├── app/
│   ├── page.tsx              # 메인 페이지 (지출 입력)
│   ├── login/
│   │   └── page.tsx          # 로그인/입장 페이지
│   ├── history/
│   │   └── page.tsx          # 지출 내역 페이지
│   ├── api/
│   │   ├── auth/
│   │   │   └── route.ts      # 인증 API
│   │   └── spending/
│   │       └── route.ts      # 지출 관리 API
│   └── layout.tsx
├── components/
│   ├── spending-form.tsx     # 지출 입력 폼
│   ├── spending-list.tsx     # 지출 내역 리스트
│   ├── login-form.tsx        # 로그인 폼
│   └── navigation.tsx        # 네비게이션
├── lib/
│   ├── types.ts             # TypeScript 인터페이스
│   ├── db.ts                # 데이터베이스 연결
│   └── utils.ts             # 유틸리티 함수
└── docs/
    ├── v0.md                # 이 문서
    ├── tasks.md             # 작업 관리
    └── error-log.md         # 에러 로그
\`\`\`

## 아키텍처
- **프론트엔드**: Next.js 14 (App Router)
- **백엔드**: Next.js API Routes
- **데이터베이스**: 로컬 JSON 파일 (프로토타입용)
- **실시간 동기화**: 폴링 방식 (추후 WebSocket으로 업그레이드)
- **스타일링**: Tailwind CSS + shadcn/ui

## 데이터 흐름
1. 사용자가 가족코드로 로그인
2. 지출 입력 시 API로 POST 요청
3. 로컬 JSON 파일에 저장
4. 다른 사용자는 폴링으로 최신 데이터 확인
5. UI 자동 업데이트

## 상태관리
- React useState/useEffect 사용
- 전역 상태 없이 컴포넌트 레벨에서 관리
- 로컬스토리지로 사용자 정보 유지

## 라우팅
- `/` : 메인 페이지 (지출 입력)
- `/login` : 로그인/입장 페이지
- `/history` : 지출 내역 페이지
- `/api/auth` : 인증 API
- `/api/spending` : 지출 관리 API

## 보안·성능·접근성
- **보안**: 가족코드 기반 간단 인증, XSS 방지
- **성능**: 컴포넌트 최적화, 이미지 최적화
- **접근성**: ARIA 라벨, 키보드 네비게이션, 색상 대비

## 테스트·배포
- **테스트**: 수동 테스트 위주
- **배포**: Vercel 배포

## API 설계
### POST /api/auth
- 요청: `{ familyCode: string, userName: string }`
- 응답: `{ success: boolean, user: User }`

### GET /api/spending
- 요청: `?familyCode=xxx&period=week`
- 응답: `{ spendings: Spending[] }`

### POST /api/spending
- 요청: `{ amount: number, category: string, memo?: string, userName: string, familyCode: string }`
- 응답: `{ success: boolean, spending: Spending }`

## 데이터 모델
\`\`\`typescript
interface User {
  name: string;
  familyCode: string;
}

interface Spending {
  id: string;
  amount: number;
  category: string;
  memo?: string;
  userName: string;
  familyCode: string;
  createdAt: string;
}

interface Family {
  code: string;
  users: string[];
  createdAt: string;
}
\`\`\`

## 에러 처리
- try-catch로 API 에러 처리
- 사용자 친화적 에러 메시지 표시
- 네트워크 에러 시 재시도 로직

## 로깅
- console.log로 디버깅 정보 출력
- 에러 발생 시 상세 로그 기록

## 변경 이력
- 2025-08-25: 프로젝트 초기 설계 완료
